<!DOCTYPE html>
<html>

<body>
    <%- include('templates/header'); %>
    <%- include('templates/layout-header'); %>
    <igem-layout>
        <q-page padding :class="rM('text-dark', 'text-light')">
            <div class="row justify-center">
                <h3>Notebook</h3>
            </div>
            <div class="row justify-center">
                <div class="col-xs-12 col-md-6 col-lg-4">
                    <q-field class="full-width">
                        <q-select
                            float-label="Filter Tags"
                            multiple
                            chips
                            clearable
                            v-model="selectedTags"
                            :options="tags"
                            :dark="nightMode"
                        >
                        </q-select>
                    </q-field>
                </div>
            </div>
            <div class="row justify-center items-center">
                <div class="row">
                    <div class="col-xs-12 col-sm-6 col-md-4">
                        <month-table
                            title="May"
                            :start="1"
                            :length="31"
                            :events="events.may"
                            :filter="selectedTags"
                            @set-events="evts => eventsToDisplay = evts"
                            @select="data => selected = data"
                            :selected="selected"
                        >
                        </month-table>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-4">
                        <month-table
                            title="June"
                            :start="4"
                            :length="30"
                            :events="[]"
                            :filter="selectedTags"
                            @set-events="evts => eventsToDisplay = evts"
                            @select="data => selected = data"
                            :selected="selected"
                        >
                        </month-table>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-4">
                            <month-table
                                title="July"
                                :start="6"
                                :length="31"
                                :events="[]"
                                :filter="selectedTags"
                                @set-events="evts => eventsToDisplay = evts"
                                @select="data => selected = data"
                                :selected="selected"
                            >
                            </month-table>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-4">
                        <month-table
                            title="August"
                            :start="2"
                            :length="31"
                            :events="[]"
                            :filter="selectedTags"
                            @set-events="evts => eventsToDisplay = evts"
                            @select="data => selected = data"
                            :selected="selected"
                        >
                        </month-table>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-4">
                        <month-table
                            title="September"
                            :start="5"
                            :length="30"
                            :events="[]"
                            :filter="selectedTags"
                            @set-events="evts => eventsToDisplay = evts"
                            @select="data => selected = data"
                            :selected="selected"
                        >
                        </month-table>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-4">
                        <month-table
                            title="October"
                            :start="0"
                            :length="31"
                            :events="[]"
                            :filter="selectedTags"
                            @set-events="evts => eventsToDisplay = evts"
                            @select="data => selected = data"
                            :selected="selected"
                        >
                        </month-table>
                    </div>
                </div>
            </div>

            <div class="row reverse">
                <q-btn
                    ref="clearBtn"
                    v-show="eventsToDisplay.length > 0"
                    class="bg-indigo-12 text-white"
                    label="Clear Selected Date"
                    icon="clear"
                    @click="eventsToDisplay = []; selected = {}"
                >
                </q-btn>
            </div>
            <div ref="timeline" class="row justify-center">
                <h4 v-show="Object.keys(selected).length > 0">
                    {{iGEMParseDate(selected.pos + 1) + ' of ' + selected.month }}
                </h4>
            </div>
            <notebook-dynamic-timeline
                v-show="eventsToDisplay.length != 0"
                :events="eventsToDisplay"
                :clear-btn="$refs.clearBtn"
                >
            </notebook-dynamic-timeline>


            <q-timeline v-show="eventsToDisplay.length == 0" color="secondary" style="padding: 0 24px;" responsive>
                <q-timeline-entry heading>Notebook</q-timeline-entry>
                <q-timeline-entry heading>March 2018</q-timeline-entry>

                <q-timeline-entry title="Wet - Safety training" subtitle="March 11 2018" side="left" icon="colorize" color="red">
                    <div>
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut
                        labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                        laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in
                        voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat
                        non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                    </div>
                </q-timeline-entry>

                <q-timeline-entry title="Dry - Start Basic Model" subtitle="April 16 2018" side="right" icon="memory" color="blue">
                    <div>
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut
                        labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                        laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in
                        voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat
                        non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                    </div>
                </q-timeline-entry>

                <q-timeline-entry heading>July 2018</q-timeline-entry>

                <q-timeline-entry title="Milestone - First Part" subtitle="July 8 2018" side="left" icon="start" color="orange">
                    <div>
                        Created our first part
                    </div>
                </q-timeline-entry>

                <q-timeline-entry title="Wet - First Results" subtitle="March 11 2018" side="left" icon="colorize" color="red">
                    <div>
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut
                        labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                        laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in
                        voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat
                        non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                    </div>
                </q-timeline-entry>

                <q-timeline-entry title="Dry - Start Model Enhancements" subtitle="April 16 2018" side="right" icon="memory" color="blue">
                    <div>
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut
                        labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                        laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in
                        voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat
                        non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                    </div>
                </q-timeline-entry>
            </q-timeline>
        </q-page>
    </igem-layout>
    <%- include('templates/layout-footer'); %>
    <script src="/javascripts/lodash.js"></script>
    <script>
        iGEM.parseDate = function (day) {
            if (day == 1) {
                return '1st'
            }
            if (day == 2) {
                return '2nd'
            }
            if (day == 3) {
                return '3rd'
            }
            return day + 'th'
        }
        iGEM.data = {
            iGEMParseDate: iGEM.parseDate,
            selectedTags: [],
            tags: _.map(['dry', 'wet', 'milestone'], (value) => {
                return {
                    label: value,
                    value
                }
            }),
            selected: {},
            eventsToDisplay: [],
            events: {
                may: [
                    {
                        month: 5,
                        day: 1,
                        title: 'Test #1',
                        content: `<p>Test #1</p>`,
                        tags: ['wet']
                    },
                    {
                        month: 5,
                        day: 1,
                        title: 'Test #2',
                        content: `<p>Test #2</p>`,
                        tags: ['dry']
                    },
                    {
                        month: 5,
                        day: 1,
                        title: 'Test #22',
                        content: `<p>Test #22</p>`,
                        tags: ['milestone']
                    },
                    {
                        month: 5,
                        day: 2,
                        title: 'Test #3',
                        content: `<p>Test #3</p>`,
                        tags: ['wet']
                    },
                    {
                        month: 5,
                        day: 2,
                        title: 'Test #4',
                        content: `<p>Test #4</p>`,
                        tags: ['dry']
                    },
                    {
                        month: 5,
                        day: 6,
                        title: 'Test #5',
                        content: `<p>Test #5</p>`,
                        tags: ['wet']
                    },
                    {
                        month: 5,
                        day: 6,
                        title: 'Test #6',
                        content: `<p>Test #6</p>`,
                        tags: ['dry']
                    },
                    {
                        month: 5,
                        day: 10,
                        title: 'Test #7',
                        content: `<p>Test #7</p>`,
                        tags: ['wet']
                    },
                ]
            }
        }
    </script>
    <script>
        iGEM.registerHook('loadHook', async function ([Vue, store]) {
            await iGEM.loadComponent(iGEM.links.MonthTable)
            await iGEM.loadComponent(iGEM.links.NotebookDynamicTimeline)
            store.commit('setPage', 'notebook')
        })
        iGEM.registerHook('loadedHook', async function ([self]) {
            setTimeout(() => {
                iGEM.scrollToElement(self.$refs.timeline)
            }, 1000);
        })
    </script>
    <%- include('templates/footer'); %>
</body>

</html>